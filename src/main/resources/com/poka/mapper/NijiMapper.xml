<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.poka.mapper.NijiMapper">

    
    <select id="getTotalCount" resultType = "int" >

    </select>
    
    <select id="getListWithPaging" resultType = "com.poka.domain.NijiVO" >
 <![CDATA[
	 SELECT * 
        FROM   (  SELECT rownum rn, 
	    N.NNO,N.TITLE,N.CONTENT,n.category,n.img,n.price,n.writer,n.regdate,n.updatedate
		FROM P_NIJI N
		LEFT OUTER JOIN P_NIJI_TAG T
		ON N.NNO = T.NNO
		WHERE t.tagname like '%' || #{search} || '%'
		or n.title like '%' || #{search} || '%'
		or n.content like '%' || #{search} || '%'
		or n.writer like '%' || #{search} || '%'
 		AND    rno > 0
        AND    rownum <= #{cri.pageNum} * #{cri.amount} ) 
        WHERE  rn > (#{cri.pageNum} - 1) * #{cri.amount}
 ]]>
    </select>
    
    <update id="update">

    </update>
    
    <delete id="delete">
	</delete>
    
    
    <select id="read" resultType="com.poka.domain.NijiVO">
    </select>

	<insert id="insert">
    </insert>
    
    
   <select id="getList" 
	        resultType="com.poka.domain.NijiVO">
	<![CDATA[
		SELECT N.NNO,N.TITLE,N.CONTENT,n.category,n.img,n.price,n.writer,n.regdate,n.updatedate
		FROM P_NIJI N
		LEFT OUTER JOIN P_NIJI_TAG T
		ON N.NNO = T.NNO
		WHERE t.tagname like '%' || #{search} || '%'
		or n.title like '%' || #{search} || '%'
		or n.content like '%' || #{search} || '%'
		or n.writer like '%' || #{search} || '%'
    ]]>
    </select>

    
       <select id="getTag" 
	        resultType="com.poka.domain.NijiTagVO">
		SELECT * 
		FROM P_NIJI_TAG
		WHERE nno = #{nno}
    </select>
    
    
</mapper>







